	# Makefile for Flexible Water Program.

MAKEFILE = Makefile
SRC = .
FFLAGS = -static -O3 -pg
LDFLAGS = -static -O3 -pg
CFLAGS =
LIBS= -lfftw3
LD = ifort
FC = ifort
CC = gcc
EXEC =	qmd.x

OBJ = 	$(SRC)/main.o \
	$(SRC)/setup_positions.o \
	$(SRC)/setup_ice.o \
	$(SRC)/setup_interface.o \
	$(SRC)/setup_options.o \
	$(SRC)/md_eq.o \
	$(SRC)/md_melt.o \
	$(SRC)/md_static.o \
	$(SRC)/md_dynamics.o \
	$(SRC)/md_pathi.o \
	$(SRC)/md_forces.o \
	$(SRC)/md_tools.o \
	$(SRC)/md_rattle.o \
	$(SRC)/md_thermostat.o \
	$(SRC)/md_barostat.o \
	$(SRC)/ljones.o \
	$(SRC)/buckingham.o \
	$(SRC)/ewald_cubic.o \
	$(SRC)/ewald_noncubic.o \
	$(SRC)/ewald_smeared.o \
	$(SRC)/intra_harmonic.o \
	$(SRC)/intra_morse.o \
	$(SRC)/intra_morse_harm.o \
	$(SRC)/intra_spcfw.o \
	$(SRC)/linked_cell.o \
	$(SRC)/neigh_list.o \
	$(SRC)/correct_tem.o \
	$(SRC)/evolve.o \
	$(SRC)/evolve_basic.o \
	$(SRC)/evolve_cl.o \
	$(SRC)/evolve_pi.o \
	$(SRC)/evolve_rigid.o \
	$(SRC)/random.o \
	$(SRC)/kinetic.o \
	$(SRC)/fourier.o \
	$(SRC)/io.o \

##############################################################
all:	$(EXEC)

$(EXEC):$(OBJ)
	$(LD) -o $(EXEC) $(LDFLAGS) $(OBJ) $(LIBS)

.f.o:	
	$(FC) -c $(FFLAGS) -o $@ $*.f

.c.o:	
	$(CC) -c $(CFLAGS) -o $@ $*.c

clean:
	rm -f $(EXEC) $(OBJ) core

new:
	rm -f $(EXEC) $(OBJ) core
	make -f $(MAKEFILE)


